# **MP-SHM-X2 模型参数规范文档**

## **1. 参数分类说明**

在MP-SHM-X2模型中，参数分为三类：

| 类型 | 符号 | 定义 | 实现方式 |
|------|------|------|----------|
| **常量参数** | C | 不随状态或时间变化的固定值 | 标量数值 |
| **参数函数** | F | 依赖于一个或多个状态变量的函数 | 查找表、解析式、经验公式 |
| **初始条件** | IC | 仿真起始时的状态值 | 标量数值 |

**关键约定**：
- 温度单位：使用开尔文（K）或摄氏度（°C），需保持一致
- 时间单位：秒（s），除非特别注明
- SOC：无量纲，范围[0,1]
- 函数依赖关系：`f(x,y)`表示函数`f`依赖于变量`x`和`y`

---

## **2. 参数详细列表**

### **2.1 随机激励模块参数**

| 符号 | 名称 | 类型 | 单位 | 典型值/范围 | 函数形式/依赖关系 | 备注 |
|------|------|------|------|-------------|-------------------|------|
| $\mu[S]$ | 驻留时间对数均值 | F | - | 状态依赖 | $\mu[S]: \mathcal{S} \to \mathbb{R}$ | 半马尔可夫链参数 |
| $\sigma[S]$ | 驻留时间对数标准差 | F | - | 状态依赖 | $\sigma[S]: \mathcal{S} \to \mathbb{R}^+$ | 半马尔可夫链参数 |
| $\tau_{\text{ou},f}$ | CPU频率OU时间常数 | C | s | 10-60 | - | 均值回归速度 |
| $\sigma_{\text{ou},f}$ | CPU频率OU强度 | C | Hz/√s | 50-200 | - | 噪声波动幅度 |
| $\tau_{\text{ou},L}$ | 屏幕亮度OU时间常数 | C | s | 5-30 | - | 均值回归速度 |
| $\sigma_{\text{ou},L}$ | 屏幕亮度OU强度 | C | nits/√s | 10-50 | - | 噪声波动幅度 |
| $\bar{f}[S]$ | 基准CPU频率 | F | Hz | 状态依赖 | $\bar{f}[S]: \mathcal{S} \to \mathbb{R}^+$ | 用户状态映射 |
| $\bar{L}[S]$ | 基准屏幕亮度 | F | nits | 状态依赖 | $\bar{L}[S]: \mathcal{S} \to \mathbb{R}^+$ | 用户状态映射 |
| $\overline{\text{APL}}[S]$ | 基准平均图像电平 | F | - | 状态依赖 | $\overline{\text{APL}}[S]: \mathcal{S} \to [0,1]$ | 用户状态映射 |
| $\alpha$ | CPU功耗系数 | C | W/Hz³ | 1e-9~5e-9 | - | 与芯片制程相关 |
| $P_{\text{driver}}$ | 屏幕驱动基础功耗 | C | W | 0.05-0.15 | - | OLED驱动电路 |
| $C_{\text{oled}}$ | OLED效率系数 | C | W/nits | 1e-4~5e-4 | - | 屏幕发光效率 |
| $\gamma$ | OLED非线性指数 | C | - | 2.0-2.5 | - | 典型值2.2 |
| $P_{\text{net,idle}}$ | 网络空闲功耗 | C | W | 0.01-0.05 | - | 无线电待机 |
| $P_{\text{net,max}}$ | 网络最大功耗 | C | W | 0.5-2.0 | - | 数据传输峰值 |
| $P_{\text{base}}$ | 系统基底功耗 | C | W | 0.1-0.3 | - | 内存、传感器等 |
| $\tau_{\text{tail}}$ | 网络尾耗时常数 | C | s | 10-30 | - | 指数衰减时间 |
| $\lambda_{\text{net}}[S]$ | 数据包到达率 | F | 1/s | 状态依赖 | $\lambda_{\text{net}}[S]: \mathcal{S} \to \mathbb{R}^+$ | 泊松过程强度 |

### **2.2 电化学模块参数**

| 符号 | 名称 | 类型 | 单位 | 典型值/范围 | 函数形式/依赖关系 | 备注 |
|------|------|------|------|-------------|-------------------|------|
| $Q_{\text{design}}$ | 设计容量 | C | Ah | 3.0-5.0 | - | 电池标称容量 |
| $\text{SOH}(t)$ | 健康状态 | F或C | - | 1.0（新电池） | 常量1或衰减函数 | 老化模型可选 |
| $U_{\text{ocv}}(z,T_c)$ | 开路电压 | F | V | 3.0-4.2 | 查找表$U_{\text{ocv}}(z,T_c)$ | SOC和温度依赖 |
| $R_0(z,T_c)$ | 欧姆内阻 | F | Ω | 0.05-0.15 | $R_0(T_c) \cdot f_R(z)$ | Arrhenius+SOC修正 |
| $R_p(T_c)$ | 极化电阻 | F | Ω | 0.02-0.08 | $R_{p,\text{ref}} \cdot \exp\left[\frac{E_a}{R}\left(\frac{1}{T_c}-\frac{1}{T_{\text{ref}}}\right)\right]$ | Arrhenius温度依赖 |
| $C_p(T_c)$ | 极化电容 | F | F | 1000-5000 | $C_{p,\text{ref}} \cdot g_C(T_c)$ | 温度依赖函数 |
| $V_{\text{cut}}$ | 截止电压 | C | V | 3.0-3.3 | - | 欠压保护阈值 |
| $E_a$ | 活化能 | C | J/mol | 20000-50000 | - | Arrhenius方程参数 |
| $T_{\text{ref}}$ | 参考温度 | C | K | 298.15 (25°C) | - | Arrhenius参考点 |
| $R$ | 气体常数 | C | J/(mol·K) | 8.3145 | - | 物理常数 |

**电化学函数典型形式**：
1. **内阻温度依赖**（Arrhenius）：
   $$
   R_0(T_c) = R_{0,\text{ref}} \cdot \exp\left[\frac{E_a}{R}\left(\frac{1}{T_c} - \frac{1}{T_{\text{ref}}}\right)\right]
   $$

2. **内阻SOC依赖**（经验公式）：
   $$
   f_R(z) = a_0 + a_1 e^{-b_1 z} + a_2 e^{b_2 (z-1)}
   $$
   低SOC和高SOC时内阻增大

3. **开路电压函数**：通常使用查找表，或Shepherd模型：
   $$
   U_{\text{ocv}}(z) = E_0 - K \cdot \frac{z}{z+0.1} + A e^{-B(1-z)}
   $$

### **2.3 热力学模块参数**

| 符号 | 名称 | 类型 | 单位 | 典型值/范围 | 函数形式/依赖关系 | 备注 |
|------|------|------|------|-------------|-------------------|------|
| $C_c$ | 核心热容 | C | J/K | 60-100 | - | 电池芯热容量 |
| $C_s$ | 表面热容 | C | J/K | 10-20 | - | 外壳热容量 |
| $R_{\text{th,in}}$ | 内部热阻 | C | K/W | 1-5 | - | 核心到表面热阻 |
| $h_{\text{eff}}$ | 有效对流系数 | C | W/(m²·K) | 5-15 | - | 环境换热能力 |
| $A_{\text{surf}}$ | 电池表面积 | C | m² | 0.005-0.01 | - | 换热面积 |
| $\eta_{\text{therm}}$ | 热耦合系数 | C | - | 0.1-0.3 | - | 系统热传导比例 |
| $\frac{\partial U_{\text{ocv}}}{\partial T}(z,T_c)$ | 熵热系数 | F | V/K | -0.1~0.3 mV/K | 查找表或数值差分 | SOC和温度依赖 |
| $T_{\text{amb}}(t)$ | 环境温度 | F或C | K或°C | 273~313 (0~40°C) | 常量或时间函数 | 外部环境 |

**熵热系数实现**：
- **查找表**：直接存储$\partial U/\partial T$关于$(z,T_c)$的网格
- **数值差分**：$\frac{\partial U_{\text{ocv}}}{\partial T} \approx \frac{U_{\text{ocv}}(z,T_c+\Delta T) - U_{\text{ocv}}(z,T_c-\Delta T)}{2\Delta T}$

### **2.4 初始条件与数值参数**

| 符号 | 名称 | 类型 | 单位 | 典型值/范围 | 备注 |
|------|------|------|------|-------------|------|
| $z_0$ | 初始SOC | IC | - | 1.0 | 满电起始 |
| $V_{p,0}$ | 初始极化电压 | IC | V | 0.0 | 无极化起始 |
| $T_{c,0}$ | 初始核心温度 | IC | K | 298.15 | 室温起始 |
| $T_{s,0}$ | 初始表面温度 | IC | K | 298.15 | 室温起始 |
| $x_{\text{net},0}$ | 初始网络状态 | IC | - | 0.0 | 无尾耗起始 |
| $S_0$ | 初始用户状态 | IC | - | Idle | 空闲起始 |
| $\Delta t$ | 时间步长 | C | s | 1.0 | Euler积分步长 |
| $t_{\text{max}}$ | 最大仿真时间 | C | s | 86400 (24h) | 单次运行上限 |
| $N_{\text{MC}}$ | 蒙特卡洛次数 | C | - | 100-1000 | 统计样本量 |
| $\text{seed}$ | 随机种子 | C | - | 任意整数 | 重现性控制 |

---

## **3. 参数函数实现**

<!-- 暂无 -->
---

## **4. 参数校准优先级**

### **4.1 关键参数（必须校准）**
1. **电化学核心**：$U_{\text{ocv}}(z,T_c)$, $R_0(z,T_c)$, $Q_{\text{design}}$
2. **热力学参数**：$C_c$, $C_s$, $R_{\text{th,in}}$, $h_{\text{eff}}$
3. **功率系数**：$\alpha$, $P_{\text{driver}}$, $C_{\text{oled}}$

### **4.2 次要参数（可估算）**
1. **极化参数**：$R_p$, $C_p$（可从EIS测量估算）
2. **随机过程参数**：$\tau_{\text{ou}}$, $\sigma_{\text{ou}}$（可从负载波动分析）
3. **用户行为参数**：$\mu[S]$, $\sigma[S]$（可从使用日志统计）

### **4.3 固定参数（文献值）**
1. **物理常数**：$R = 8.3145$ J/(mol·K)
2. **材料参数**：$E_a \approx 35000$ J/mol（典型锂离子电池）
3. **设计参数**：$A_{\text{surf}}$（从电池尺寸计算）

---

## **5. 重要注意事项**

1. **温度单位一致性**：所有热力学计算使用开尔文（K）
2. **SOC归一化**：确保所有SOC相关函数定义域为[0,1]
3. **函数插值**：查找表需要适当的插值方法（线性、样条）
4. **参数依赖性**：注意$R_p$和$C_p$的乘积$\tau_p = R_p C_p$应相对稳定
5. **边界处理**：SOC接近0或1时，函数需要合理的极限行为

---

**文档状态**：完整参数规范，可直接用于模型实现。

**实现建议**：建议先实现常量参数版本，验证模型基本行为，再逐步添加参数函数（温度依赖、SOC依赖等），最后引入随机激励。